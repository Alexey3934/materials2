<%= render "top" %>


<div class='flex'>


    <div>
        <div style="border: solid" id="to_root">кнопка перехода на первый фрейм</div>
        <div id="leve1">
            <%= @current_category_L1 %>
        </div>

        <div class="leve2 bold">
            <%= @current_category_L2 %>
        </div>





        <div id="level3_rest" class="leve3">
            <ul>
                    <% @categories_L3.each do |el| %>
                <li>
                    <%= el.name %>
                </li>
                    <% end %>
            </ul>
        </div>

        <div id="level2_rest" class="leve2">
            <% @rest_categories_level2.each do |item|%>
            <p>
            <%= item.name %>
            </p>
            <% end %>
        </div>


        <div id="level1_rest" class="level1">
            <% @rest_categories_level1.each do |item|%>
            <p>
            <%= item.name %>
            </p>
            <% end %>
        </div>



    </div>

    






    <table id='table'>
        <tr class="bold">
            <td class="td_top">название</td> 
            <td class="td_top">ед.изм.</td>
            <td class="td_top">цена розн.</td>
            <td class="td_top">цена опт.</td>
            <td class="td_top">объём опта</td>
            <td class="td_top">компания</td>
            <td class="td_top">тел для заказа</td>
        </tr>
    </table>


</div>


<%= render "bottom" %>




<script>
    const to_root   = document.querySelector("#to_root")
    to_root.addEventListener('click', () => window.location.href = '/')




    const leve1_name = document.querySelector("#leve1").innerHTML.replace(/\s+/g, '')
    const leve1      = document.querySelector("#leve1")
    const leve2_name = document.querySelector(".leve2").innerHTML.replace(/\s+/g, '')
    const leve3 = document.querySelector(".leve3")
   
    leve3.addEventListener('click', el => {
         let target = el.target.innerHTML

         if (target.length < 100) {
             target = target.replace(/\s+/g, '');
             window.location.href = `/qqq/${leve1_name}/${leve2_name}/${target}`
         }
     } )

    leve1.addEventListener('click', () => window.location.href = `/qqq/${leve1_name}`)



    const level1_rest = document.querySelector("#level1_rest")
    level1_rest.addEventListener('click', el => {
        let target = el.target.innerHTML
        if (target.length < 100) {
            target = target.replace(/\s+/g, '');
            window.location.href = `/qqq/${target}`
        }
    } )

    const level2_rest = document.querySelector("#level2_rest")
    level2_rest.addEventListener('click', el => {
        let target = el.target.innerHTML
        if (target.length < 100) {
            target = target.replace(/\s+/g, '');
            window.location.href = `/qqq/${leve1_name}/${target}`
        }
    } )


</script>